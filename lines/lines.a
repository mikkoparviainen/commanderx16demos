!to "lines.prg", cbm

!source "../includes/system.inc"
!source "../includes/graphics.inc"

GETIN=$ffe4

*=$0801
	+basic_sys

	jsr vera_init_320x240_8bpp ; set 8bpp bitmap mode
	lda #01
	sta colour
	jsr clear_screen

	lda #00
	sta colour
	ldy #10
	lda #$01
	sta hline_len+1 ; draw long horizontal lines

-	lda #0
	sta y+1
	sta x
	sta x+1
	tya
	sta y
	sta hline_len
	jsr hline
	dey
	bne -

-	jsr GETIN
	cmp #00
	beq -

	lda #01
	sta colour
	jsr clear_screen

	lda #06
	sta colour
	lda #$0F
	sta y
	lda #$10
	sta x
	lda #00
	sta y+1
	sta x+1 ; pixel one above start of line on start x
	jsr draw_pixel
	lda #$20
	sta x
	jsr draw_pixel ; pixel one above start line on stop x
	lda #$14
	sta y
	jsr draw_pixel ; pixel one above stop of line

	lda #00
	sta colour
	sta x0+1
	sta x1+1
	sta y0+1
	sta y1+1

	lda #$10
	sta x0
	sta y0
	lda #$20
	sta x1
	lda #$15
	sta y1

	jsr line

	lda #$28
	sta y0
	;clc
	;adc #$01
	sta y1
	lda #$10
	sta x0
	lda #$64
	sta x1
	lda #$00
	sta x0+1
	sta x1+1
	sta y0+1
	sta y1+1

	jsr line

-	jsr GETIN
	cmp #00
	beq -

	jsr vera_reset
	rts
